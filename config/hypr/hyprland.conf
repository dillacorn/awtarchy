#  ▄▄▄       █     █░▄▄▄█████▓ ▄▄▄       ██▀███   ▄████▄   ██░ ██▓██   ██▓
# ▒████▄    ▓█░ █ ░█░▓  ██▒ ▓▒▒████▄    ▓██ ▒ ██▒▒██▀ ▀█  ▓██░ ██▒▒██  ██▒
# ▒██  ▀█▄  ▒█░ █ ░█ ▒ ▓██░ ▒░▒██  ▀█▄  ▓██ ░▄█ ▒▒▓█    ▄ ▒██▀▀██░ ▒██ ██░
# ░██▄▄▄▄██ ░█░ █ ░█ ░ ▓██▓ ░ ░██▄▄▄▄██ ▒██▀▀█▄  ▒▓▓▄ ▄██▒░▓█ ░██  ░ ▐██▓░
#  ▓█   ▓██▒░░██▒██▓   ▒██▒ ░  ▓█   ▓██▒░██▓ ▒██▒▒ ▓███▀ ░░▓█▒░██▓ ░ ██▒▓░
#  ▒▒   ▓▒█░░ ▓░▒ ▒    ▒ ░░    ▒▒   ▓▒█░░ ▒▓ ░▒▓░░ ░▒ ▒  ░ ▒ ░░▒░▒  ██▒▒▒ 
#   ▒   ▒▒ ░  ▒ ░ ░      ░      ▒   ▒▒ ░  ░▒ ░ ▒░  ░  ▒    ▒ ░▒░ ░▓██ ░▒░ 
#   ░   ▒     ░   ░    ░        ░   ▒     ░░   ░ ░         ░  ░░ ░▒ ▒ ░░  
#       ░  ░    ░                   ░  ░   ░     ░ ░       ░  ░  ░░ ░     
#                                                 ░                ░ ░     

# github.com/dillacorn/awtarchy/tree/main/config/hypr
# ~/.config/hypr/hyprland.conf

# ───────────────────────────────────────────────────────────────────────────────
# MONITORS
# ───────────────────────────────────────────────────────────────────────────────

# list displays: hyprctl monitors
# example syntax: monitor=(name),(resolution@refresh),(position_0x0),(scale),(vrr,1/0 = enable/disable VRR)
# disable display example syntax: monitor=(name),disable

monitor=,preferred,auto,auto,vrr,0
monitor=Virtual-1,1600x900@60,auto,1,vrr,0

# ───────────────────────────────────────────────────────────────────────────────
# ENV
# ───────────────────────────────────────────────────────────────────────────────

env = XDG_CURRENT_DESKTOP,Hyprland
env = XDG_SESSION_DESKTOP,Hyprland
env = XDG_SESSION_TYPE,wayland
env = GDK_BACKEND,wayland,x11,*
env = QT_QPA_PLATFORM,wayland;xcb
env = CLUTTER_BACKEND,wayland
env = QT_STYLE_OVERRIDE,kvantum
env = QT_AUTO_SCREEN_SCALE_FACTOR,1
env = QT_WAYLAND_DISABLE_WINDOWDECORATION,1
env = QT_QPA_PLATFORMTHEME,qt5ct
env = QT6CT_PLATFORM_PLUGIN,qt6ct
env = QT_QUICK_CONTROLS_STYLE,org.hyprland.style
env = MOZ_ENABLE_WAYLAND,1
env = GDK_SCALE,1
env = QT_SCALE_FACTOR,1
env = XCURSOR_SIZE,24
env = GTK_THEME,Materia-dark
env = XCURSOR_THEME,ComixCursors-White
env = GAMESCOPE_WSI,vk_wayland

# Commented out section
# env = WLR_RENDERER_ALLOW_SOFTWARE,0
# env = WLR_DRM_NO_ATOMIC,1  # Can help with some GPUs
# env = HYPRLAND_NO_RT,1     # Disable realtime scheduling if having issues
# env = __GL_GSYNC_ALLOWED,1
# env = __GL_VRR_ALLOWED,1

# Commented out - For Nvidia GPUs
# env = __GLX_VENDOR_LIBRARY_NAME,nvidia  # If NVIDIA
# env = GBM_BACKEND,nvidia-drm  # If NVIDIA
# env = LIBVA_DRIVER_NAME,nvidia  # If NVIDIA

# ───────────────────────────────────────────────────────────────────────────────
# PERMISSIONS (requires Hyprland restart after edits)
# ───────────────────────────────────────────────────────────────────────────────

# Add future apps (getting the correct path/regex):
# 1) Best: when Hyprland prompts, copy the binary path it shows and paste it into:
#    permission = /full/path/to/bin, <perm>, <mode>
#
# 2) If you know the command name (replace `grim` with your app):
#    readlink -f "$(command -v grim)"
#
# 3) If the app has a window open: focus it, then run:
#    pid="$(hyprctl activewindow -j | jq -r .pid)"; readlink -f "/proc/$pid/exe"
#
# Keyboard device names (for `keyboard` rules):
#   hyprctl devices

ecosystem {
    no_update_news = true
    enforce_permissions = true
}

# screencopy (direct capture)
permission = /usr/bin/grim, screencopy, allow
permission = /usr/bin/wf-recorder, screencopy, allow
permission = /usr/bin/hyprpicker, screencopy, allow
permission = /usr/bin/hyprlock, screencopy, allow
permission = /usr/(lib|libexec|lib64)/xdg-desktop-portal-hyprland, screencopy, allow

# plugin (hyprpm)
permission = /usr/(bin|local/bin)/hyprpm, plugin, allow

# keyboard allowlist template (default is allow)
# permission = ^(YOUR KEYBOARD NAME REGEX)$, keyboard, allow
# permission = .*, keyboard, deny

# ───────────────────────────────────────────────────────────────────────────────
# AUTOSTART
# ───────────────────────────────────────────────────────────────────────────────

exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP HYPRLAND_INSTANCE_SIGNATURE XDG_SESSION_TYPE
exec-once = systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP HYPRLAND_INSTANCE_SIGNATURE XDG_SESSION_TYPE

exec-once = sh -lc '$HOME/.config/hypr/scripts/portal_fixup.sh'
exec-once = /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1
exec-once = gnome-keyring-daemon --start --password-store=secrets

# exec-once = ~/.config/hypr/scripts/last_to_load_recorder.sh &
exec-once = ~/.config/hypr/scripts/waybar.sh start
exec-once = sh -lc '$HOME/.config/hypr/scripts/waybar_ready_sound.sh >/dev/null 2>&1 & disown'

exec-once = hyprsunset &
exec-once = mako &
exec-once = nm-applet &
exec-once = blueman-applet &
exec-once = nwg-look -a &
exec-once = hypridle -c ~/.config/hypr/hypridle.conf &
exec-once = ~/.config/hypr/scripts/hyprpm-auto-reload.sh &
exec-once = ~/.config/hypr/scripts/swww-wallpaper.sh &
# exec-once = ~/.config/hypr/scripts/wallpaper_engine.sh &
exec-once = ~/.config/hypr/scripts/waytrogen-settings.sh &
exec-once = sh -lc 'exec alacritty --class awtarchy-tips-tui,awtarchy-tips-tui --title awtarchy-tips-tui -e "$HOME/.config/hypr/scripts/awtarchy-tips-tui.sh" --autostart'
# exec-once = ~/.config/hypr/scripts/miclock.sh &
exec-once = wl-paste --type text --watch cliphist store &
exec-once = wl-paste --type image --watch cliphist store &

# ───────────────────────────────────────────────────────────────────────────────
# LOOK & FEEL
# ───────────────────────────────────────────────────────────────────────────────

general {
    gaps_in = 6
    gaps_out = 9
    border_size = 1
col.active_border = rgba(a0a0a0ff)
col.inactive_border = rgba(4b4b4bff)
    resize_on_border = true
    allow_tearing = true
    layout = dwindle
}

decoration {
    rounding = 0
    rounding_power = 2
    active_opacity = 1.0
    inactive_opacity = 1.0

    # Shaders (uncomment only one)
    #screen_shader = ~/.config/hypr/shaders/vibrance
    #screen_shader = ~/.config/hypr/shaders/cathode_ray_tube_optional_vibrance
    #screen_shader = ~/.config/hypr/shaders/subtle_crt
    #screen_shader = ~/.config/hypr/shaders/gimmicky-crt

    # Shaders that require `debug { damage_tracking = 0 } }` or you will see config errors.
    #screen_shader = ~/.config/hypr/shaders/vhs
    #screen_shader = ~/.config/hypr/shaders/acid_trip

    shadow {
        enabled = true
        range = 4
        render_power = 3
        color = rgba(1a1a1aee)
    }
    blur {
        enabled = true
        size = 3
        passes = 1
        vibrancy = 0.1696
    }
}

debug {
        damage_tracking = 2
}

render {
    # Direct scanout: 0 = off, 1 = on, 2 = auto (only when content_type == "game")
    # Reduces latency when a single fullscreen client (e.g. nested gamescope) owns the monitor.
    direct_scanout = 2

    # Non-shader color management:
    # 0 = disable
    # 1 = whenever possible
    # 2 = only with direct scanout & passthrough
    # 3 = disable and ignore CM issues
    # 2 is the “DS + passthrough only” mode, which pairs cleanly with gamescope.
    non_shader_cm = 2

    # Fullscreen color-management passthrough:
    # 0 = off
    # 1 = always passthrough
    # 2 = HDR-only passthrough
    # Default is 2 anyway, but setting it explicitly is fine.
    # If gamescope is doing HDR / tonemapping, 2 avoids double-processing for HDR content.
    cm_fs_passthrough = 2
}

#opengl {
#   nvidia_anti_flicker = true
#}

cursor {
    sync_gsettings_theme = true
    no_hardware_cursors = 2
    zoom_disable_aa = true
    no_warps = false
    persistent_warps = false
    warp_on_change_workspace = 0
    enable_hyprcursor = true
}

animations {
    enabled = yes
    bezier = easeOutQuint, 0.23, 1, 0.32, 1
    bezier = easeInOutSlight, 0.4, 0.1, 0.2, 1
    bezier = linear, 0, 0, 1, 1
    bezier = softFade, 0.2, 0.5, 0.3, 1
    bezier = fastOut, 0.2, 0, 0.6, 1
    animation = global, 1, 8, default
    animation = border, 1, 3.0, easeOutQuint
    animation = borderangle, 1, 40, linear, once
    animation = windows, 1, 3.0, easeOutQuint
    animation = windowsIn, 1, 2.0, easeOutQuint, popin 87%
    animation = windowsOut, 1, 1.5, linear, popin 87%
    animation = fadeIn, 1, 1.5, softFade
    animation = fadeOut, 1, 1.3, softFade
    animation = fade, 1, 2.0, softFade
    animation = layers, 1, 2.5, easeInOutSlight
    animation = layersIn, 1, 2.0, easeInOutSlight, fade
    animation = layersOut, 1, 1.5, fastOut, fade
    animation = fadeLayersIn, 1, 1.4, softFade
    animation = fadeLayersOut, 1, 1.3, softFade
    animation = workspaces, 1, 1.8, easeInOutSlight, fade
    animation = workspacesIn, 1, 1.3, softFade, fade
    animation = workspacesOut, 1, 1.4, softFade, fade
    animation = specialWorkspace, 1, 1.9, easeInOutSlight, fade
}

dwindle {
    pseudotile = true
    preserve_split = true
    force_split = 0
    special_scale_factor = 0.9
    # smart_split = true
    # single_window_aspect_ratio = 1 0.6852
}

master {
    new_status = master
    new_on_top = 1
    mfact = 0.5
}

misc {
    # Visuals (startup / defaults)
    force_default_wallpaper = -1
    disable_hyprland_logo = true
    disable_splash_rendering = true

    # Rendering / display behavior
    vfr = true
    vrr = 2
    mouse_move_enables_dpms = true

    # Input convenience
    middle_click_paste = false

    # Focus / workspace behavior
    focus_on_activate = false
    initial_workspace_tracking = 0

    # Swallowing (terminal -> spawned app)
    enable_swallow = off
    swallow_regex = ^((A|a)lacritty)$

    # Stability / UX dialogs
    enable_anr_dialog = true
    allow_session_lock_restore = true

    # Suppress helper warnings/checks
    disable_hyprland_guiutils_check = true
}

xwayland {
    enabled = true
    force_zero_scaling = true
}

plugin {
    hyprbars {
        bar_height = 20

        # bar background
        bar_color = rgb(1e1e1e)
        bar_blur = false

        # title text (optional)
        col.text = rgb(d0d0d0)

        # layout
        bar_title_enabled = true
        bar_buttons_alignment = right
        bar_padding = 5
        bar_button_padding = 7
        bar_text_align = left
        bar_text_size = 10
        bar_text_font = NotoSansM Nerd Font Mono

        # buttons: same as bar background; icons are light gray
        hyprbars-button = rgb(1e1e1e), 20, , hyprctl dispatch killactive
        hyprbars-button = rgb(1e1e1e), 20, 󰨤, hyprctl dispatch fullscreen 1
        hyprbars-button = rgb(1e1e1e), 20, , hyprctl dispatch togglefloating

        on_double_click = hyprctl dispatch fullscreen 1
    }
}

# ───────────────────────────────────────────────────────────────────────────────
# INPUT
# ───────────────────────────────────────────────────────────────────────────────

input {
    kb_layout = us
    follow_mouse = 1
    repeat_delay = 250
    repeat_rate = 35
    numlock_by_default = true
    touchpad {
        natural_scroll = true
        disable_while_typing = true
        clickfinger_behavior = true
        scroll_factor = 0.5
    }
    
    # Mouse: No acceleration (1:1 raw input)
    accel_profile = flat
    sensitivity = 0
    force_no_accel = 1
    
    # ──────────────────────────────────────────────────────────────
    # Game profiles @ 400 DPI w/ maccel
    # ──────────────────────────────────────────────────────────────
    
    # CS2 (Tactical - no accel)
    # Sens: 2.0
    # Style: Precise, consistent aim for tac shooters
    # maccel: Use "No Accel" mode with SENS_MULT 0.40 (400 DPI)
    
    # The Finals (Arena - with accel)
    # Hardware mouse DPI:    1600           # Hardware DPI of mouse
    # Base sens:             35             # Precise tracking
    # Fast sens:             47             # flicks / movement
    # Accel ratio:           47/35 = 1.34   # fast/base = ratio value
    # maccel setup:
    #   - Mode: Linear
    #   - SENS_MULT:         0.40    # 400 DPI feel
    #   - Y/x Ratio:         1.0     # 1.2 on 4:3 stretched / 1.1 on 16:10 stretched
    #   - INPUT_DPI:         1600    # must match hardware DPI
    #   - Angle Rotation:    0.0     # personal preference
    #   - Accel:             1000    # no diff past value of 7 in graph visually but I believe increasing past 7 actually makes the jump more steep, because it does in "raw accel"
    #   - Offset:            15      # accel activation threshold (mouse speed)
    #   - OutputCap:         1.34    # example varies between games
    
    # ──────────────────────────────────────────────────────────────
    # maccel setup guide
    # https://github.com/Gnarus-G/maccel
    #
    # How to calculate your OutputCap: (value varies between all games)
    # 1. Play without accel - find your comfortable "fast" sens (e.g., 47)
    # 2. Find the "slow" sens you want for precision (e.g., 35)
    # 3. Calculate: OutputCap = fast_sens / slow_sens
    #    Example: 47 / 35 = 1.34
    #
    # Result: Slow movements = 35 sens, fast flicks = 47 sens
    # (Game Example: The Finals)
    #
    # ──────────────────────────────────────────────────────────────
}

# ───────────────────────────────────────────────────────────────────────────────
# GESTURES
# ───────────────────────────────────────────────────────────────────────────────

# See https://wiki.hypr.land/Configuring/Gestures
gesture = 3, horizontal, workspace

# ───────────────────────────────────────────────────────────────────────────────
# MODIFIERS
# ───────────────────────────────────────────────────────────────────────────────

$mod           = ALT
$super         = SUPER
$tempalt       = ALT     # default modifier is ALT; in noalt submap ALT is disabled
$submap_file   = /tmp/hypr-submap

# ───────────────────────────────────────────────────────────────────────────────
# LAUNCHERS / COMMANDS
# ───────────────────────────────────────────────────────────────────────────────

# Base paths (using variables instead of repeating ~/.config/hypr/scripts everywhere)
$hypr_dir             = ~/.config/hypr
$hypr_scripts         = $hypr_dir/scripts
$launch               = $hypr_scripts/launch_handler.sh

# Core apps (define before anything that uses them)
$terminal             = alacritty
$web-browser          = firefox
$calculator           = speedcrunch
$yazi                 = $terminal -e yazi

# App/menu launchers
$app-launcher         = $hypr_scripts/fuzzel_toggle.sh
$wlogout              = $hypr_scripts/wlogout_toggle.sh
$hypr_quicksettings   = $launch hypr_quicksettings "$terminal --class hypr_quicksettings -e $hypr_scripts/hypr_quicksettings.sh"
$awtarchy-tips-tui    = $launch awtarchy-tips-tui "$terminal --class awtarchy-tips-tui -e $hypr_scripts/awtarchy-tips-tui.sh"

# Audio
$wiremix              = $launch wiremix "$terminal --class Wiremix -e wiremix"
$pavucontrol          = $launch pavucontrol "pavucontrol"
$pulsemixer           = $launch pulsemixer "$terminal --class Pulsemixer -e pulsemixer"
$mute_unmute          = wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
$play_pause           = $hypr_scripts/play_pause.sh

# Bars / UI toggles
$hyprbars_toggle      = $hypr_scripts/hyprbars_toggle.sh
$waybar_toggle        = $hypr_scripts/waybar_toggle.sh
$waybar_flip          = $hypr_scripts/waybar_flip.sh
$waybar_rotate        = $hypr_scripts/waybar_rotate.sh
$toggle_animations    = $hypr_scripts/toggle_animations.sh
$mako_dismiss         = $hypr_scripts/mako_dismiss.sh

# Themes / wallpaper
$waytrogen            = $hypr_scripts/waytrogen_launcher.sh
$theme_select         = $hypr_scripts/theme_select.sh
$wallpaper_flip       = $hypr_scripts/wallpaper_flip.sh
$wallpaper_flip_all   = $hypr_scripts/wallpaper_flip_all.sh

# Capture / clipboard / QR
$screenshot_select    = env XDG_ACTIVATION_TOKEN=$XDG_ACTIVATION_TOKEN $hypr_scripts/screenshot_area.sh
$screenshot_full      = $hypr_scripts/screenshot_fullscreen.sh
$screenshot_display   = $hypr_scripts/screenshot_display.sh
$gif_capture          = $hypr_scripts/gif_capture.sh
$clipboard_history    = $hypr_scripts/cliphist-fuzzel.sh
$qr_scan              = $hypr_scripts/qr_scan.sh

# Utilities
$workspace_mix        = $hypr_scripts/workspace_mix.sh
$zoom                 = $hypr_scripts/zoom.sh
$hyprpicker           = hyprpicker -a -f hex
$hypr-ddc-brightness  = $hypr_scripts/hypr-ddc-brightness.sh
$vibrance_shader      = $hypr_scripts/vibrance_shader.sh
$hyprsunset_ctl       = $hypr_scripts/hyprsunset_ctl.sh

# Terminal tools
$maccel               = $launch maccel "$terminal --class maccel -e maccel"
$smtty                = $launch smtty "$terminal --class smtty -e smtty"
$btop                 = $launch btop "$terminal --class btop -e btop"

# Complex one-off
$smtty-O              = sh -lc 'if hyprctl clients | grep -q "class: smtty-O"; then hyprctl dispatch closewindow class:smtty-O; else $terminal --class smtty-O -e sh -lc '"'"'smtty -O; printf "\n[smtty -O finished]\nPress ENTER to close..."; read -r _'"'"'; fi'

# Submap references (Toggle on)  [write name to file on entry]
$noalt_on             = sh -c 'echo noalt > /tmp/hypr-submap; notify-send -a Hyprland -t 1000 "noalt mode: ON"; hyprctl dispatch submap noalt'
$mouse_on             = sh -c 'echo mouse > /tmp/hypr-submap; notify-send -a Hyprland -t 1000 "mouse mode: ON"; hyprctl dispatch submap mouse'
$vm_on                = sh -c 'echo vm > /tmp/hypr-submap; notify-send -a Hyprland -t 1000 "vm mode: ON"; hyprctl dispatch submap vm'

# ───────────────────────────────────────────────────────────────────────────────
# DEFAULT MODE (ALT is modifier; SUPER is app/meta)
# ───────────────────────────────────────────────────────────────────────────────

# App launchers / terminals
bind  = $mod,          P,        exec, $app-launcher
bind  = $super,        D,        exec, $app-launcher
bind  = $mod SHIFT,    RETURN,   exec, $terminal
bind  = $super SHIFT,  RETURN,   exec, $terminal
bind  = $super,        RETURN,   exec, $terminal
bind  = $mod SHIFT,    B,        exec, $btop
bind  = $super SHIFT,  B,        exec, $btop
bind  = $super,        B,        exec, $web-browser
bind  = $mod SHIFT,    C,        exec, $calculator
bind  = $super SHIFT,  C,        exec, $calculator
bind  = $mod SHIFT,    M,        exec, $maccel
bind  = $super SHIFT,  M,        exec, $maccel

# Audio / media
bind  = $mod,          V,        exec, $wiremix
bind  = $super,        V,        exec, $wiremix
binde = $mod,          SPACE,    exec, $mako_dismiss
binde = $super,        SPACE,    exec, $mako_dismiss

# Terminal utilities (smtty)
bind  = $super $mod,   G,        exec, $smtty
bind  = $super $mod,   L,        exec, smtty -S -l
bind  = $super $mod,   O,        exec, $smtty-O
bind  = $super $mod,   K,        exec, smtty -k

# UI / compositor toggles
bind  = $super $mod,   T,        exec, $hyprbars_toggle
bind  = $super $mod,   B,        exec, $waybar_rotate
bind  = $super $mod CTRL, B,     exec, $waybar_toggle
bind  = $super CTRL,   B,        exec, $waybar_flip
bind  = $super,        A,        exec, $toggle_animations

# Brightness / color temperature
bind  = $super $mod,        backspace,  exec, $hypr_quicksettings
bind  = $super $mod,        equal,      exec, $hypr-ddc-brightness up 5
bind  = $super $mod,        minus,      exec, $hypr-ddc-brightness down 5
bind  = $super $mod CTRL,   equal,      exec, $hyprsunset_ctl up
bind  = $super $mod CTRL,   minus,      exec, $hyprsunset_ctl down
bind  = $super $mod CTRL,   backspace,  exec, $hyprsunset_ctl toggle

# File managers / system
bind  = $super,        E,        exec, pcmanfm-qt
bind  = $super SHIFT,  E,        exec, $yazi
bind  = $super,        L,        exec, hyprlock
bind  = $super,        I,        exec, $hyprpicker
bind  = $super,        P,        exec, $wlogout

# Themes / wallpaper
bind  = $super,        W,        exec, $waytrogen
bind  = $super SHIFT,  W,        exec, $wallpaper_flip
bind  = $super CTRL,   W,        exec, $wallpaper_flip_all
bind  = $super,        T,        exec, $theme_select

# Capture / clipboard / misc
bind  = $super,        C,        exec, $clipboard_history
bind  = $super,        S,        exec, $qr_scan
bind  = $super SHIFT,  S,        exec, $screenshot_select
bind  = $super SHIFT,  F,        exec, $screenshot_full
bind  = $super SHIFT,  D,        exec, $screenshot_display
bind  = $super SHIFT,  G,        exec, $gif_capture

# Window management
bind = $super, Q,                     killactive
bind = $super SHIFT, Q,               killactive
bind = $mod SHIFT, Q,                 killactive
bind = $mod, F4,                      killactive
bind = $super $mod, Q,                exec, hyprctl kill
bind = $mod, Y,                       pin
bind = $super, Y,                     pin
bind = $tempalt, R,                   layoutmsg, swapsplit
bind = $tempalt SHIFT, R,             layoutmsg, togglesplit
bind = $super, R,                     layoutmsg, swapsplit
bind = $super SHIFT, R,               layoutmsg, togglesplit
bind = $tempalt, F,                   togglefloating
bind = $tempalt CTRL, F,              fullscreen
bind = $super, F,                     togglefloating
bind = $super CTRL, F,                fullscreen
bind = $mod, TAB,                     cyclenext
bind = $mod, TAB,                     bringactivetotop
bind = $mod SHIFT, TAB,               cyclenext, prev

# Focus move (ALT/SUPER arrows)
bind = $tempalt, left,                movefocus, l
bind = $tempalt, right,               movefocus, r
bind = $tempalt, up,                  movefocus, u
bind = $tempalt, down,                movefocus, d
bind = $super, left,                    movefocus, l
bind = $super, right,                   movefocus, r
bind = $super, up,                      movefocus, u
bind = $super, down,                    movefocus, d
# ALT/SUPER hjkl
bind = $tempalt, h,                   movefocus, l
bind = $tempalt, j,                   movefocus, d
bind = $tempalt, k,                   movefocus, u
bind = $tempalt, l,                   movefocus, r
bind = $super, h,                       movefocus, l
bind = $super, j,                       movefocus, d
bind = $super, k,                       movefocus, u
bind = $super, l,                       movefocus, r

# Window move (ALT/SUPER+SHIFT arrows)
bind = $tempalt SHIFT, left,          movewindow, l
bind = $tempalt SHIFT, right,         movewindow, r
bind = $tempalt SHIFT, up,            movewindow, u
bind = $tempalt SHIFT, down,          movewindow, d
bind = $super SHIFT, left,              movewindow, l
bind = $super SHIFT, right,             movewindow, r
bind = $super SHIFT, up,                movewindow, u
bind = $super SHIFT, down,              movewindow, d
# ALT/SUPER+SHIFT hjkl
bind = $tempalt SHIFT, h,             movewindow, l
bind = $tempalt SHIFT, j,             movewindow, d
bind = $tempalt SHIFT, k,             movewindow, u
bind = $tempalt SHIFT, l,             movewindow, r
bind = $super SHIFT, h,                 movewindow, l
bind = $super SHIFT, j,                 movewindow, d
bind = $super SHIFT, k,                 movewindow, u
bind = $super SHIFT, l,                 movewindow, r

# Send current workspace to monitor (ALT/SUPER+CTRL+SHIFT numbers)
bind = $tempalt CTRL SHIFT, left,          movecurrentworkspacetomonitor, -1
bind = $tempalt CTRL SHIFT, right,         movecurrentworkspacetomonitor, +1
bind = $tempalt CTRL SHIFT, up,            movecurrentworkspacetomonitor, -1
bind = $tempalt CTRL SHIFT, down,          movecurrentworkspacetomonitor, +1
bind = $super CTRL SHIFT, left,              movecurrentworkspacetomonitor, -1
bind = $super CTRL SHIFT, right,             movecurrentworkspacetomonitor, +1
bind = $super CTRL SHIFT, up,                movecurrentworkspacetomonitor, -1
bind = $super CTRL SHIFT, down,              movecurrentworkspacetomonitor, +1
# ALT/SUPER+CTRL+SHIFT "[" or "]"
bind = $tempalt CTRL SHIFT, bracketleft,   movecurrentworkspacetomonitor, -1
bind = $tempalt CTRL SHIFT, bracketright,  movecurrentworkspacetomonitor, +1
bind = $super CTRL SHIFT, bracketleft,       movecurrentworkspacetomonitor, -1
bind = $super CTRL SHIFT, bracketright,      movecurrentworkspacetomonitor, +1

# Workspaces (ALT/SUPER numbers)
bind = $tempalt, 1,             workspace, 1
bind = $tempalt, 2,             workspace, 2
bind = $tempalt, 3,             workspace, 3
bind = $tempalt, 4,             workspace, 4
bind = $tempalt, 5,             workspace, 5
bind = $tempalt, 6,             workspace, 6
bind = $tempalt, 7,             workspace, 7
bind = $tempalt, 8,             workspace, 8
bind = $tempalt, 9,             workspace, 9
bind = $tempalt, 0,             workspace, 10
bind = $super, 1,                 workspace, 1
bind = $super, 2,                 workspace, 2
bind = $super, 3,                 workspace, 3
bind = $super, 4,                 workspace, 4
bind = $super, 5,                 workspace, 5
bind = $super, 6,                 workspace, 6
bind = $super, 7,                 workspace, 7
bind = $super, 8,                 workspace, 8
bind = $super, 9,                 workspace, 9
bind = $super, 0,                 workspace, 10

# Prev/next workspace with (ALT/SUPER "[" or "]")
bind = $tempalt, bracketleft,   workspace, -1
bind = $tempalt, bracketright,  workspace, +1
bind = $super, bracketleft,       workspace, -1
bind = $super, bracketright,      workspace, +1

# Move window to workspace (ALT/SUPER+SHIFT numbers)
bind = $tempalt SHIFT, 1,       movetoworkspacesilent, 1
bind = $tempalt SHIFT, 2,       movetoworkspacesilent, 2
bind = $tempalt SHIFT, 3,       movetoworkspacesilent, 3
bind = $tempalt SHIFT, 4,       movetoworkspacesilent, 4
bind = $tempalt SHIFT, 5,       movetoworkspacesilent, 5
bind = $tempalt SHIFT, 6,       movetoworkspacesilent, 6
bind = $tempalt SHIFT, 7,       movetoworkspacesilent, 7
bind = $tempalt SHIFT, 8,       movetoworkspacesilent, 8
bind = $tempalt SHIFT, 9,       movetoworkspacesilent, 9
bind = $tempalt SHIFT, 0,       movetoworkspacesilent, 10
bind = $super SHIFT, 1,           movetoworkspacesilent, 1
bind = $super SHIFT, 2,           movetoworkspacesilent, 2
bind = $super SHIFT, 3,           movetoworkspacesilent, 3
bind = $super SHIFT, 4,           movetoworkspacesilent, 4
bind = $super SHIFT, 5,           movetoworkspacesilent, 5
bind = $super SHIFT, 6,           movetoworkspacesilent, 6
bind = $super SHIFT, 7,           movetoworkspacesilent, 7
bind = $super SHIFT, 8,           movetoworkspacesilent, 8
bind = $super SHIFT, 9,           movetoworkspacesilent, 9
bind = $super SHIFT, 0,           movetoworkspacesilent, 10

# Resize (ALT/SUPER+CTRL arrows / hold)
binde = $tempalt CTRL, right,   resizeactive, 30 0
binde = $tempalt CTRL, left,    resizeactive, -30 0
binde = $tempalt CTRL, up,      resizeactive, 0 -30
binde = $tempalt CTRL, down,    resizeactive, 0 30
binde = $super CTRL, right,       resizeactive, 30 0
binde = $super CTRL, left,        resizeactive, -30 0
binde = $super CTRL, up,          resizeactive, 0 -30
binde = $super CTRL, down,        resizeactive, 0 30
# ALT/SUPER+CTRL hjkl
binde = $tempalt CTRL, h,       resizeactive, -30 0
binde = $tempalt CTRL, j,       resizeactive, 0 30
binde = $tempalt CTRL, k,       resizeactive, 0 -30
binde = $tempalt CTRL, l,       resizeactive, 30 0
binde = $super CTRL, h,           resizeactive, -30 0
binde = $super CTRL, j,           resizeactive, 0 30
binde = $super CTRL, k,           resizeactive, 0 -30
binde = $super CTRL, l,           resizeactive, 30 0

# Mouse (ALT/SUPER mouse-left/right / hold)
bindm = $tempalt, mouse:272,    movewindow
bindm = $tempalt, mouse:273,    resizewindow
bindm = $super, mouse:272,        movewindow
bindm = $super, mouse:273,        resizewindow

# Digital vibrance quick adjust (SUPER+ALT+[] & SUPER+ALT+\)
bind = $super $mod, bracketright, exec, $vibrance_shader up
bind = $super $mod, bracketleft,  exec, $vibrance_shader down
bind = $super $mod, backslash,    exec, $vibrance_shader toggle

# Workspace mixing script (SUPER+ALT+CTRL numbers)
bind = $super $mod CTRL, 1,       exec, $workspace_mix toggle 1
bind = $super $mod CTRL, 2,       exec, $workspace_mix toggle 2
bind = $super $mod CTRL, 3,       exec, $workspace_mix toggle 3
bind = $super $mod CTRL, 4,       exec, $workspace_mix toggle 4
bind = $super $mod CTRL, 5,       exec, $workspace_mix toggle 5
bind = $super $mod CTRL, 6,       exec, $workspace_mix toggle 6
bind = $super $mod CTRL, 7,       exec, $workspace_mix toggle 7
bind = $super $mod CTRL, 8,       exec, $workspace_mix toggle 8
bind = $super $mod CTRL, 9,       exec, $workspace_mix toggle 9
bind = $super $mod CTRL, 0,       exec, $workspace_mix toggle 10
bind = $super $mod CTRL, F,       exec, $workspace_mix focus
bind = $super $mod CTRL, R,       exec, $workspace_mix restore

# Zoom script (SUPER +/-)
binde = $super, equal,            exec, $zoom +
binde = $super, minus,            exec, $zoom -
binde = $super SHIFT, equal,      exec, $zoom ++
binde = $super SHIFT, minus,      exec, $zoom --
bind  = $super, backspace,        exec, $zoom reset
bind  = $super, backslash,        exec, $zoom rigid
binde = $super CTRL, equal,       exec, $zoom + step:5%
binde = $super CTRL, minus,       exec, $zoom - step:5%

# Scratchpad (SUPER+x,X)
bind = $super, X,                 togglespecialworkspace, magic
bind = $super SHIFT, X,           movetoworkspace, special:magic

# Misc (SUPER+F12)
bind = $super,      F12,  exec, sh -c 'ver=$(hyprctl version | awk "/^Hyprland /{print \$2; exit}"); [ -z \"$ver\" ] && ver=\"unknown\"; notify-send "Hyprland Version" "$ver"'
bind = $super CTRL, F12,  exec, notify-send "Debug" "$(hyprctl activewindow -j | jq -r '.class, .title')"

# Media & Brightness
bindel = ,XF86AudioRaiseVolume,   exec, wpctl set-volume -l 1 @DEFAULT_AUDIO_SINK@ 5%+
bindel = ,XF86AudioLowerVolume,   exec, wpctl set-volume      @DEFAULT_AUDIO_SINK@ 5%-
bindel = ,XF86AudioMute,          exec, wpctl set-mute        @DEFAULT_AUDIO_SINK@ toggle
bindel = ,XF86AudioMicMute,       exec, wpctl set-mute        @DEFAULT_AUDIO_SOURCE@ toggle
bindel = ,XF86MonBrightnessUp,    exec, brightnessctl -e4 -n2 set 5%+
bindel = ,XF86MonBrightnessDown,  exec, brightnessctl -e4 -n2 set 5%-
bind   = $super, M,               exec, $mute_unmute
bindl  = ,XF86AudioPlay,          exec, $play_pause
bindl  = ,XF86AudioNext,          exec, playerctl next
bindl  = ,XF86AudioPrev,          exec, playerctl previous

# Submap binds                    (Toggle on/off)
bind = $super $mod, N,            exec, $noalt_on
bind = $super $mod, M,            exec, $mouse_on
bind = $super $mod, V,            exec, $vm_on

# ───────────────────────────────────────────────────────────────────────────────
# noalt SUBMAP; alt is disabled for most tasks
# ───────────────────────────────────────────────────────────────────────────────

submap = noalt

# Submap references in "noalt" (toggle off/on)  [empty file on exit]
$noalt_off   = sh -c 'truncate -s 0 /tmp/hypr-submap; notify-send -a Hyprland -t 1000 "noalt mode: OFF"; hyprctl dispatch submap reset'
$mouse_on    = sh -c 'echo mouse > /tmp/hypr-submap; notify-send -a Hyprland -t 1000 "mouse mode: ON"; hyprctl dispatch submap mouse'
$vm_on       = sh -c 'echo vm > /tmp/hypr-submap; notify-send -a Hyprland -t 1000 "vm mode: ON"; hyprctl dispatch submap vm'

# App launchers / terminals
bind  = $mod,          P,        exec, $app-launcher
bind  = $super,        D,        exec, $app-launcher
bind  = $mod SHIFT,    RETURN,   exec, $terminal
bind  = $super SHIFT,  RETURN,   exec, $terminal
bind  = $super,        RETURN,   exec, $terminal
bind  = $mod SHIFT,    B,        exec, $btop
bind  = $super SHIFT,  B,        exec, $btop
bind  = $super,        B,        exec, $web-browser
bind  = $mod SHIFT,    C,        exec, $calculator
bind  = $super SHIFT,  C,        exec, $calculator
bind  = $mod SHIFT,    M,        exec, $maccel
bind  = $super SHIFT,  M,        exec, $maccel

# Audio / media
bind  = $mod,          V,        exec, $wiremix
bind  = $super,        V,        exec, $wiremix
binde = $mod,          SPACE,    exec, $mako_dismiss
binde = $super,        SPACE,    exec, $mako_dismiss

# Terminal utilities (smtty)
bind  = $super $mod,   G,        exec, $smtty
bind  = $super $mod,   L,        exec, smtty -S -l
bind  = $super $mod,   O,        exec, $smtty-O
bind  = $super $mod,   K,        exec, smtty -k

# UI / compositor toggles
bind  = $super $mod,   T,        exec, $hyprbars_toggle
bind  = $super $mod,   B,        exec, $waybar_rotate
bind  = $super $mod CTRL, B,     exec, $waybar_toggle
bind  = $super CTRL,   B,        exec, $waybar_flip
bind  = $super,        A,        exec, $toggle_animations

# Brightness / color temperature
bind  = $super $mod,        backspace,  exec, $hypr_quicksettings
bind  = $super $mod,        equal,      exec, $hypr-ddc-brightness up 5
bind  = $super $mod,        minus,      exec, $hypr-ddc-brightness down 5
bind  = $super $mod CTRL,   equal,      exec, $hyprsunset_ctl up
bind  = $super $mod CTRL,   minus,      exec, $hyprsunset_ctl down
bind  = $super $mod CTRL,   backspace,  exec, $hyprsunset_ctl toggle

# File managers / system
bind  = $super,        E,        exec, pcmanfm-qt
bind  = $super SHIFT,  E,        exec, $yazi
bind  = $super,        L,        exec, hyprlock
bind  = $super,        I,        exec, $hyprpicker
bind  = $super,        P,        exec, $wlogout

# Themes / wallpaper
bind  = $super,        W,        exec, $waytrogen
bind  = $super SHIFT,  W,        exec, $wallpaper_flip
bind  = $super CTRL,   W,        exec, $wallpaper_flip_all
bind  = $super,        T,        exec, $theme_select

# Capture / clipboard / misc
bind  = $super,        C,        exec, $clipboard_history
bind  = $super,        S,        exec, $qr_scan
bind  = $super SHIFT,  S,        exec, $screenshot_select
bind  = $super SHIFT,  F,        exec, $screenshot_full
bind  = $super SHIFT,  D,        exec, $screenshot_display
bind  = $super SHIFT,  G,        exec, $gif_capture

# Window management in "noalt"
bind = $super, Q,                     killactive
bind = $super SHIFT, Q,               killactive
bind = $mod, F4,                      killactive
bind = $super $mod, Q,                exec, hyprctl kill
bind = $super, Y,                     pin
bind = $super SHIFT, R,               layoutmsg, togglesplit
bind = $super, R,                     layoutmsg, swapsplit
bind = $super, F,                     togglefloating
bind = $super CTRL, F,                fullscreen
bind = $mod, TAB,                     cyclenext
bind = $mod, TAB,                     bringactivetotop
bind = $mod SHIFT, TAB,               cyclenext, prev

# Focus move in "noalt" (SUPER arrows)
bind = $super, left,                  movefocus, l
bind = $super, right,                 movefocus, r
bind = $super, up,                    movefocus, u
bind = $super, down,                  movefocus, d
# SUPER hjkl
bind = $super, h,                     movefocus, l
bind = $super, j,                     movefocus, d
bind = $super, k,                     movefocus, u
bind = $super, l,                     movefocus, r

# Window move in "noalt" (SUPER+SHIFT arrows)
bind = $super SHIFT, left,            movewindow, l
bind = $super SHIFT, right,           movewindow, r
bind = $super SHIFT, up,              movewindow, u
bind = $super SHIFT, down,            movewindow, d
# SUPER+SHIFT hjkl
bind = $super SHIFT, h,               movewindow, l
bind = $super SHIFT, j,               movewindow, d
bind = $super SHIFT, k,               movewindow, u
bind = $super SHIFT, l,               movewindow, r

# Send current workspace to monitor in "noalt" (SUPER+CTRL+SHIFT numbers)
bind = $super CTRL SHIFT, left,          movecurrentworkspacetomonitor, -1
bind = $super CTRL SHIFT, right,         movecurrentworkspacetomonitor, +1
bind = $super CTRL SHIFT, up,            movecurrentworkspacetomonitor, -1
bind = $super CTRL SHIFT, down,          movecurrentworkspacetomonitor, +1
# SUPER+CTRL+SHIFT "[" or "]"
bind = $super CTRL SHIFT, bracketleft,   movecurrentworkspacetomonitor, -1
bind = $super CTRL SHIFT, bracketright,  movecurrentworkspacetomonitor, +1

# Workspaces in "noalt" (SUPER numbers)
bind = $super, 1,             workspace, 1
bind = $super, 2,             workspace, 2
bind = $super, 3,             workspace, 3
bind = $super, 4,             workspace, 4
bind = $super, 5,             workspace, 5
bind = $super, 6,             workspace, 6
bind = $super, 7,             workspace, 7
bind = $super, 8,             workspace, 8
bind = $super, 9,             workspace, 9
bind = $super, 0,             workspace, 10

# Prev/next workspace with (SUPER "[" or "]")
bind = $super, bracketleft,   workspace, -1
bind = $super, bracketright,  workspace, +1

# Move window to workspace in "noalt" (SUPER+SHIFT numbers)
bind = $super SHIFT, 1,       movetoworkspacesilent, 1
bind = $super SHIFT, 2,       movetoworkspacesilent, 2
bind = $super SHIFT, 3,       movetoworkspacesilent, 3
bind = $super SHIFT, 4,       movetoworkspacesilent, 4
bind = $super SHIFT, 5,       movetoworkspacesilent, 5
bind = $super SHIFT, 6,       movetoworkspacesilent, 6
bind = $super SHIFT, 7,       movetoworkspacesilent, 7
bind = $super SHIFT, 8,       movetoworkspacesilent, 8
bind = $super SHIFT, 9,       movetoworkspacesilent, 9
bind = $super SHIFT, 0,       movetoworkspacesilent, 10

# Resize in "noalt" (SUPER+CTRL arrows / hold)
binde = $super CTRL, right,   resizeactive, 30 0
binde = $super CTRL, left,    resizeactive, -30 0
binde = $super CTRL, up,      resizeactive, 0 -30
binde = $super CTRL, down,    resizeactive, 0 30
# SUPER+CTRL hjkl
binde = $super CTRL, h,       resizeactive, -30 0
binde = $super CTRL, j,       resizeactive, 0 30
binde = $super CTRL, k,       resizeactive, 0 -30
binde = $super CTRL, l,       resizeactive, 30 0

# Mouse in "noalt" (SUPER mouse-left/right / hold)
bindm = $super, mouse:272,    movewindow
bindm = $super, mouse:273,    resizewindow

# Digital vibrance quick adjust (SUPER+ALT+[] & SUPER+ALT+\)
bind = $super $mod, bracketright,  exec, $vibrance_shader up
bind = $super $mod, bracketleft,   exec, $vibrance_shader down
bind = $super $mod, backslash,     exec, $vibrance_shader toggle

# Workspace mixing script (SUPER+ALT+CTRL numbers)
bind = $super $mod CTRL, 1,        exec, $workspace_mix toggle 1
bind = $super $mod CTRL, 2,        exec, $workspace_mix toggle 2
bind = $super $mod CTRL, 3,        exec, $workspace_mix toggle 3
bind = $super $mod CTRL, 4,        exec, $workspace_mix toggle 4
bind = $super $mod CTRL, 5,        exec, $workspace_mix toggle 5
bind = $super $mod CTRL, 6,        exec, $workspace_mix toggle 6
bind = $super $mod CTRL, 7,        exec, $workspace_mix toggle 7
bind = $super $mod CTRL, 8,        exec, $workspace_mix toggle 8
bind = $super $mod CTRL, 9,        exec, $workspace_mix toggle 9
bind = $super $mod CTRL, 0,        exec, $workspace_mix toggle 10
bind = $super $mod CTRL, F,        exec, $workspace_mix focus
bind = $super $mod CTRL, R,        exec, $workspace_mix restore

# Zoom script in "noalt" (SUPER +/-)
binde = $super, equal,             exec, $zoom +
binde = $super, minus,             exec, $zoom -
binde = $super SHIFT, equal,       exec, $zoom ++
binde = $super SHIFT, minus,       exec, $zoom --
bind  = $super, backspace,         exec, $zoom reset
bind  = $super, backslash,         exec, $zoom rigid
binde = $super CTRL, equal,        exec, $zoom + step:5%
binde = $super CTRL, minus,        exec, $zoom - step:5%

# Scratchpad in "noalt" (SUPER+x,X)
bind = $super, X,                  togglespecialworkspace, magic
bind = $super SHIFT, X,            movetoworkspace, special:magic

# Misc in "noalt" (SUPER+F12)
bind = $super,      F12,           exec, sh -c 'ver=$(hyprctl version | awk "/^Hyprland /{print \$2; exit}"); [ -z \"$ver\" ] && ver=\"unknown\"; notify-send "Hyprland Version" "$ver"'
bind = $super CTRL, F12,           exec, notify-send "Debug" "$(hyprctl activewindow -j | jq -r '.class, .title')"

# Media & Brightness in "noalt"
bindel = ,XF86AudioRaiseVolume,    exec, wpctl set-volume -l 1 @DEFAULT_AUDIO_SINK@ 5%+
bindel = ,XF86AudioLowerVolume,    exec, wpctl set-volume      @DEFAULT_AUDIO_SINK@ 5%-
bindel = ,XF86AudioMute,           exec, wpctl set-mute        @DEFAULT_AUDIO_SINK@ toggle
bindel = ,XF86AudioMicMute,        exec, wpctl set-mute        @DEFAULT_AUDIO_SOURCE@ toggle
bindel = ,XF86MonBrightnessUp,     exec, brightnessctl -e4 -n2 set 5%+
bindel = ,XF86MonBrightnessDown,   exec, brightnessctl -e4 -n2 set 5%-
bind  = $super, M,                 exec, $mute_unmute
bindl = ,XF86AudioPlay,            exec, $play_pause
bindl = ,XF86AudioNext,            exec, playerctl next
bindl = ,XF86AudioPrev,            exec, playerctl previous

# Submap binds in "noalt"          (Toggle off/on)
bind = $super $mod, N,             exec, $noalt_off
bind = $super $mod, M,             exec, $mouse_on
bind = $super $mod, V,             exec, $vm_on

submap = reset

# ───────────────────────────────────────────────────────────────────────────────
# MOUSE SUBMAP
# ───────────────────────────────────────────────────────────────────────────────

submap = mouse

# Submap references in "mouse" (Toggle off)  [empty file on exit]
$mouse_off = sh -c 'truncate -s 0 /tmp/hypr-submap; notify-send -a Hyprland -t 1000 "mouse mode: OFF"; hyprctl dispatch submap reset'

# Resize (MOUSE-left/right / hold)
binde = , h,               resizeactive, -30 0
binde = , j,               resizeactive, 0 30
binde = , k,               resizeactive, 0 -30
binde = , l,               resizeactive, 30 0
binde = , left,            resizeactive, -30 0
binde = , down,            resizeactive, 0 30
binde = , up,              resizeactive, 0 -30
binde = , right,           resizeactive, 30 0
bindm = , mouse:272,       movewindow
bindm = , mouse:273,       resizewindow
bind  = , mouse:274,       togglefloating
bind  = , Escape,          exec, $mouse_off reset
bind  = , Return,          exec, $mouse_off reset

# Submap binds in "mouse"  (Toggle off/on)
bind = $super $mod, M,     exec, $mouse_off
bind = $super $mod, N,     exec, $noalt_on
bind = $super $mod, V,     exec, $vm_on

submap = reset

# ───────────────────────────────────────────────────────────────────────────────
# VIRTUAL MACHINE SUBMAP
# ───────────────────────────────────────────────────────────────────────────────

submap = vm

# Submap references in "vm" (Toggle off)  [empty file on exit]
$vm_off = sh -c 'truncate -s 0 /tmp/hypr-submap; notify-send -a Hyprland -t 1000 "vm mode: OFF"; hyprctl dispatch submap reset'

# Binds
bind  = $super $mod, Q,             killactive
bind  = $super $mod, F,             togglefloating
bind  = $super $mod, RETURN,        exec, $terminal
bind  = $super $mod, P,             exec, $app-launcher
bind  = $super $mod, C,             exec, $calculator
bind  = $super $mod CTRL, V,        exec, $wiremix
bind  = $super $mod CTRL, S,        exec, $qr_code_scan
bind  = $super $mod, S,             exec, $screenshot_select
bind  = $super $mod, D,             exec, $screenshot_display
bind  = $super $mod, G,             exec, $gif_capture
binde = $super $mod, SPACE,         exec, $mako_dismiss
bindm = $super $mod, mouse:272,     movewindow
bindm = $super $mod, mouse:273,     resizewindow
bind  = $super $mod, mouse:274,     togglefloating

# Workspaces (SUPER+ALT numbers)
bind = $super $mod, 1,              workspace, 1
bind = $super $mod, 2,              workspace, 2
bind = $super $mod, 3,              workspace, 3
bind = $super $mod, 4,              workspace, 4
bind = $super $mod, 5,              workspace, 5
bind = $super $mod, 6,              workspace, 6
bind = $super $mod, 7,              workspace, 7
bind = $super $mod, 8,              workspace, 8
bind = $super $mod, 9,              workspace, 9
bind = $super $mod, 0,              workspace, 10

# Move window to workspace (SUPER+ALT+SHIFT numbers)
bind = $super $mod SHIFT, 1,        movetoworkspacesilent, 1
bind = $super $mod SHIFT, 2,        movetoworkspacesilent, 2
bind = $super $mod SHIFT, 3,        movetoworkspacesilent, 3
bind = $super $mod SHIFT, 4,        movetoworkspacesilent, 4
bind = $super $mod SHIFT, 5,        movetoworkspacesilent, 5
bind = $super $mod SHIFT, 6,        movetoworkspacesilent, 6
bind = $super $mod SHIFT, 7,        movetoworkspacesilent, 7
bind = $super $mod SHIFT, 8,        movetoworkspacesilent, 8
bind = $super $mod SHIFT, 9,        movetoworkspacesilent, 9
bind = $super $mod SHIFT, 0,        movetoworkspacesilent, 10

# Submap binds in "vm"              (Toggle off/on)
bind = $super $mod, V,              exec, $vm_off
bind = $super $mod, M,              exec, $mouse_on
bind = $super $mod, N,              exec, $noalt_on

submap = reset

# ───────────────────────────────────────────────────────────────────────────────
# RULES
# ───────────────────────────────────────────────────────────────────────────────

# Games: send to workspace 1, strip effects, fullscreen, allow tearing, keep awake
$games = ^(steam_app_.*|lutris_game_class|minigalaxy|playnite_game_class|gamescope|chiaki|moonlight|com\.moonlight_stream\.Moonlight|.*[Ww]ine.*)$
windowrule = match:class $games, workspace 1 silent
windowrule = match:class $games, no_anim on
windowrule = match:class $games, no_blur on
windowrule = match:class $games, no_shadow on
windowrule = match:class $games, decorate off
windowrule = match:class $games, border_size 0
windowrule = match:class $games, rounding 0
windowrule = match:class $games, fullscreen on
windowrule = match:class $games, immediate on
windowrule = match:class $games, idle_inhibit always

# Workspace auto-assignments
windowrule = match:class ^(firefox|librewolf|Mullvad Browser|Cromite|brave-browser|io\.github\.ungoogled_software\.ungoogled_chromium)$, workspace 2 silent
windowrule = match:class ^(discord|com\.discordapp\.Discord|vesktop|dev\.vencord\.Vesktop|brave-app\.revolt\.chat__-.*|chat\.revolt\.RevoltDesktop|info\.mumble\.Mumble|fluxer|Fluxer)$, workspace 3 silent
windowrule = match:class ^(steam|com\.valvesoftware\.Steam|SteamChat|net\.lutris\.Lutris|itch|io\.itch\.itch|heroic|com\.heroicgameslauncher\.hgl|r2modman)$, workspace 4 silent
windowrule = match:class ^(Spotify|com\.spotify\.Client|brave-music\.youtube\.com__-.*)$, workspace 5 silent
windowrule = match:title ^(.*YouTube Music.*)$, workspace 5 silent
windowrule = match:class ^(org\.telegram\.desktop|brave-web\.telegram\.org__a_-.*|brave-messages\.google\.com__-.*)$, workspace 6 silent
windowrule = match:title ^(Telegram Web)$, workspace 6 silent
windowrule = match:class ^(Messages)$, workspace 6 silent
windowrule = match:class ^(Telegram)$, workspace 6 silent
windowrule = match:class ^(Vncviewer|rustdesk)$, workspace 7 silent
windowrule = match:class ^(com\.github\.IsmaelMartinez\.teams_for_linux)$, workspace 8 silent
windowrule = match:class ^(kdenlive|org\.kde\.kdenlive|org\.shotcut\.Shotcut|krita|org\.kde\.krita)$, workspace 9 silent
windowrule = match:class ^(obs|com\.obsproject\.Studio|gpu-screen-recorder|gpu-screen-recorder-gtk|gpu-screen-recorder-ui|gsr-ui|com\.dec05eba\.gpu_screen_recorder)$, workspace 10 silent

# Global behavior / XWayland quirks
windowrule = match:class .*, suppress_event maximize
windowrule = match:class ^$, match:title ^$, match:xwayland 1, match:float 1, match:fullscreen 0, match:pin 0, no_focus on
windowrule = match:xwayland 1, no_blur on
windowrule = match:class ^(steam)$, match:title ^$, stay_focused on
windowrule = match:class ^(steam)$, match:title ^$, min_size 1 1

# Picture-in-Picture
$pip = ^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$
windowrule = match:title $pip, float on
windowrule = match:title $pip, keep_aspect_ratio on
windowrule = match:title $pip, move (monitor_w*0.73) (monitor_h*0.70)
windowrule = match:title $pip, size (monitor_w*0.25) (monitor_h*0.25)
windowrule = match:title $pip, pin on

# Dialogs float+center
$dialogs = ^(Open File|Select a File|Choose wallpaper|Open Folder|Save As|Library|File Upload)(.*)$
windowrule = match:title $dialogs, float on
windowrule = match:title $dialogs, center on

# Transparency
windowrule = match:class ^(wofi)$, opacity 0.85 0.85
windowrule = match:class ^(Spotify)$, opacity 0.85 0.85
windowrule = match:title ^(YouTube Music|YouTube Music - .+ - YouTube Music|YouTube Music - 1\. YouTube Music)$, opacity 0.85 0.85
windowrule = match:class ^(com\.github\.th_ch\.youtube_music|brave-music\.youtube\.com__-.*)$, opacity 0.85 0.85
windowrule = match:class ^(pcmanfm-qt|localsend|org\.Waytrogen\.Waytrogen|waytrogen|org\.pulseaudio\.pavucontrol|org\.speedcrunch\.speedcrunch|net\.davidotek\.pupgui2)$, opacity 0.95 0.95

# Float + size + center
windowrule = match:class ^org\.speedcrunch\.speedcrunch$, float on
windowrule = match:class ^org\.speedcrunch\.speedcrunch$, size (monitor_w*0.15) (monitor_h*0.55)
windowrule = match:class ^org\.speedcrunch\.speedcrunch$, center on

windowrule = match:class ^org\.pulseaudio\.pavucontrol$, float on
windowrule = match:class ^org\.pulseaudio\.pavucontrol$, size (monitor_w*0.55) (monitor_h*0.70)
windowrule = match:class ^org\.pulseaudio\.pavucontrol$, center on

windowrule = match:class ^(Pulsemixer)$, float on
windowrule = match:class ^(Pulsemixer)$, size (monitor_w*0.55) (monitor_h*0.70)
windowrule = match:class ^(Pulsemixer)$, center on

windowrule = match:class ^(Wiremix)$, float on
windowrule = match:class ^(Wiremix)$, size (monitor_w*0.65) (monitor_h*0.70)
windowrule = match:class ^(Wiremix)$, center on

windowrule = match:class ^(hypr_quicksettings)$, float on
windowrule = match:class ^(hypr_quicksettings)$, size (monitor_w*0.40) (monitor_h*0.30)
windowrule = match:class ^(hypr_quicksettings)$, center on

windowrule = match:class ^(awtarchy-tips-tui)$, float on
windowrule = match:class ^(awtarchy-tips-tui)$, size (monitor_w*0.50) (monitor_h*0.50)
windowrule = match:class ^(awtarchy-tips-tui)$, center on

windowrule = match:class ^(maccel)$, float on
windowrule = match:class ^(maccel)$, size (monitor_w*0.90) (monitor_h*0.96)
windowrule = match:class ^(maccel)$, center on

windowrule = match:class ^(hyprbars)$, float on
windowrule = match:class ^(hyprbars)$, size (monitor_w*0.30) (monitor_h*0.10)
windowrule = match:class ^(hyprbars)$, center on

windowrule = match:class ^(smtty)$, float on
windowrule = match:class ^(smtty)$, size (monitor_w*0.80) (monitor_h*0.88)
windowrule = match:class ^(smtty)$, center on

windowrule = match:class ^(smtty-O)$, float on
windowrule = match:class ^(smtty-O)$, size (monitor_w*0.50) (monitor_h*0.50)
windowrule = match:class ^(smtty-O)$, center on

windowrule = match:class ^org\.Waytrogen\.Waytrogen$, float on
windowrule = match:class ^org\.Waytrogen\.Waytrogen$, size (monitor_w*0.89) (monitor_h*0.89)
windowrule = match:class ^org\.Waytrogen\.Waytrogen$, center on

windowrule = match:class ^(waytrogen)$, float on
windowrule = match:class ^(waytrogen)$, center on

windowrule = match:class ^(nm-connection-editor)$, float on
windowrule = match:class ^(nm-connection-editor)$, size (monitor_w*0.45) (monitor_h*0.45)
windowrule = match:class ^(nm-connection-editor)$, center on

windowrule = match:class ^(blueman-manager)$, float on
windowrule = match:class ^(blueman-manager)$, size (monitor_w*0.45) (monitor_h*0.45)
windowrule = match:class ^(blueman-manager)$, center on

windowrule = match:class ^(net\.davidotek\.pupgui2)$, float on
windowrule = match:class ^(net\.davidotek\.pupgui2)$, size (monitor_w*0.45) (monitor_h*0.45)
windowrule = match:class ^(net\.davidotek\.pupgui2)$, center on

windowrule = match:class ^(btop)$, float on
windowrule = match:class ^(btop)$, size (monitor_w*0.80) (monitor_h*0.85)
windowrule = match:class ^(btop)$, center on

# Force Tile
windowrule = match:class ^(steam|com\.valvesoftware\.Steam)$, match:title ^(Steam)$, tile on
windowrule = match:class ^(steam|com\.valvesoftware\.Steam)$, match:title ^(Friends List)$, tile on

# ───────────────────────────────────────────────────────────────────────────────
# SCREENSHARE GUARD
# ───────────────────────────────────────────────────────────────────────────────

windowrule = no_screen_share on,      match:class ^(Bitwarden|com\.bitwarden\.desktop|KeePassXC|org\.keepassxc\.KeePassXC|1Password|com\.1password\.1password|Enpass|org\.gnome\.Secrets|org\.gnome\.seahorse\.Application|OTPClient|otpclient|org\.rasalminen\.OTPClient|Mullvad Browser|mullvad-browser|com\.mullvad\.Browser|localsend|LocalSend|org\.localsend\.localsend|io\.github\.localsend\.localsend)$
windowrule = no_screen_share on,      match:class ^(firefox)$, match:title ^(Extension: \(Bitwarden Password Manager\).*)$
windowrule = no_screen_share on,      match:class ^(brave-browser|chromium|google-chrome|chrome|vivaldi-stable|microsoft-edge)$, match:title ^(Bitwarden Password Manager.*)$
windowrule = no_screen_share on,      match:class ^(org\.telegram\.desktop|TelegramDesktop|telegram-desktop|Telegram)$
windowrule = no_screen_share on,      match:class ^(brave-browser|chromium|google-chrome|chrome|vivaldi-stable|microsoft-edge)$, match:title ^.*Telegram.*$
windowrule = no_screen_share on,      match:class ^(Element|io\.element\.Element|im\.riot\.Riot|chat\.element\.desktop|SchildiChat|im\.fluffychat\.Fluffychat|Fractal|org\.gnome\.Fractal|nheko)$
windowrule = no_screen_share on,      match:class ^(discord|com\.discordapp\.Discord|vesktop|dev\.vencord\.Vesktop)$
windowrule = no_screen_share on,      match:class ^(Fluxer|fluxer)$
windowrule = no_screen_share on,      match:class ^(com\.github\.IsmaelMartinez\.teams_for_linux)$
windowrule = no_screen_share on,      match:class ^(Messages)$

# Layers (notifications/swaync are layer surfaces, not windows)
layerrule  = no_screen_share on,      match:namespace ^(notifications|swaync.*)$

# optional
# windowrule = no_screen_share on,    match:class ^(obs|com\.obsproject\.Studio|obs-studio|com\.obsproject\.Studio\.obs)$
# windowrule = no_screen_share on,    match:class ^(steam|com\.valvesoftware\.Steam)$
# windowrule = no_screen_share on,    match:class ^(rustdesk|com\.rustdesk\.RustDesk)$
# windowrule = no_screen_share on,    match:class ^(pcmanfm-qt|Pcmanfm-qt|pcmanfm)$
# windowrule = no_screen_share on,    match:class ^(org\.Waytrogen\.Waytrogen)$
# windowrule = no_screen_share on,    match:class ^(virt-manager)$
# windowrule = no_screen_share on,    match:class ^(Alacritty)$
# windowrule = no_screen_share on,    match:class ^(mpv)$
# layerrule  = no_screen_share on,    match:namespace ^(ags)$
# layerrule  = no_screen_share on,    match:namespace ^(logout_dialog)$
# layerrule  = no_screen_share on,    match:namespace ^(waybar)$

# ───────────────────────────────────────────────────────────────────────────────
# MANUAL SETUP
# ───────────────────────────────────────────────────────────────────────────────

# Sunshine / Moonlight Fix
# Configure in Sunshine Web-UI → “Do Command” (on connect):
#   /usr/bin/env bash -lc "$HOME/.config/hypr/scripts/sunshine-moonlight-fix.sh"
# READ SCRIPT:        cat ~/.config/hypr/scripts/sunshine-moonlight-fix.sh

# ───────────────────────────────────────────────────────────────────────────────
# .DESKTOP NOTES
# ───────────────────────────────────────────────────────────────────────────────

# ~/.local/share/applications/*

# Steam Splitratio Script
# Set split ratio between Steam and Friends List (runs once at startup with a timeout of 300s)
# READ SCRIPT:        cat ~/.config/hypr/scripts/splitratio_steam.sh
# .desktop override:  Exec=sh -lc 'pgrep -x steam >/dev/null && exit 0; /usr/bin/steam --disable-gpu "$@" & ALLOW_WAIT=1 "$HOME/.config/hypr/scripts/splitratio_steam.sh" &' _ %U
# Check file:         cat ~/.local/share/applications/steam.desktop

